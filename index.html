<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ã‚·ã‚¹å˜ Quiz - 2027 Complete</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap');
        body { font-family: 'Inter', sans-serif; background-color: #f8fafc; touch-action: manipulation; }
        .master-gold { background: linear-gradient(135deg, #ffd700, #fff8e1, #ffb300); color: #856404 !important; animation: pulse 2s infinite; box-shadow: 0 10px 20px rgba(218, 165, 32, 0.4); border: none !important; }
        @keyframes pulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.02); } }
        .ans-correct { background-color: #10b981 !important; color: white !important; }
        .ans-wrong { background-color: #ef4444 !important; color: white !important; }
    </style>
</head>
<body>
<div id="app"></div>

<script>
// --- 1. å…¨2027å˜èªãƒ‡ãƒ¼ã‚¿å®Œå…¨ç‰ˆ ---
const wordData = [
    {id:1, en:"follow", ja:"ï½ã«å¾“ã†"}, {id:2, en:"consider", ja:"ï½ã‚’è€ƒæ…®ã™ã‚‹"}, {id:3, en:"increase", ja:"å¢—ãˆã‚‹"},
    {id:4, en:"expect", ja:"ï½ã‚’äºˆæœŸã™ã‚‹"}, {id:5, en:"decide", ja:"æ±ºæ„ã™ã‚‹"}, {id:6, en:"develop", ja:"ç™ºé”ã™ã‚‹"},
    {id:7, en:"provide", ja:"ä¾›çµ¦ã™ã‚‹"}, {id:8, en:"continue", ja:"ç¶šã"}, {id:9, en:"include", ja:"å«ã‚€"},
    {id:10, en:"remain", ja:"ã¾ã¾ã§ã„ã‚‹"}, {id:11, en:"reach", ja:"ï½ã«ç€ã"}, {id:12, en:"allow", ja:"è¨±å¯ã™ã‚‹"},
    {id:13, en:"force", ja:"å¼·åˆ¶ã™ã‚‹"}, {id:14, en:"offer", ja:"ç”³ã—å‡ºã‚‹"}, {id:15, en:"realize", ja:"æ‚Ÿã‚‹"},
    {id:16, en:"suggest", ja:"ææ¡ˆã™ã‚‹"}, {id:17, en:"require", ja:"å¿…è¦ã¨ã™ã‚‹"}, {id:18, en:"worry", ja:"å¿ƒé…ã™ã‚‹"},
    {id:19, en:"wonder", ja:"ç–‘å•ã«æ€ã†"}, {id:20, en:"cost", ja:"è¦ã™ã‚‹"}, {id:21, en:"tend", ja:"ï½ã™ã‚‹å‚¾å‘ãŒã‚ã‚‹"},
    {id:22, en:"depend", ja:"ä¾å­˜ã™ã‚‹"}, {id:23, en:"share", ja:"å…±æœ‰ã™ã‚‹"}, {id:24, en:"demand", ja:"è¦æ±‚ã™ã‚‹"},
    {id:25, en:"support", ja:"æ”¯æŒã™ã‚‹"}, {id:26, en:"hire", ja:"é›‡ã†"}, {id:27, en:"regard", ja:"ï½ã¨ã¿ãªã™"},
    {id:28, en:"base", ja:"åŸºã¥ã„ã¦ã„ã‚‹"}, {id:29, en:"improve", ja:"å‘ä¸Šã•ã›ã‚‹"}, {id:30, en:"recognize", ja:"èªã‚ã‚‹"},
    // ... (1100ç•ªå°)
    {id:1101, en:"minimum", ja:"æœ€å°é™ã®"}, {id:1102, en:"lord", ja:"ç¥"}, {id:1103, en:"awkward", ja:"æ°—ã¾ãšã„"},
    {id:1104, en:"meanwhile", ja:"ãã®é–“ã«"}, {id:1105, en:"genuine", ja:"æœ¬ç‰©ã®"}, {id:1106, en:"keen", ja:"ç†±æœ›ã—ã¦"},
    // ... (1900ç•ªå°)
    {id:1948, en:"swift", ja:"ã™ã°ã‚„ã„"}, {id:1949, en:"naive", ja:"ä¸–é–“çŸ¥ã‚‰ãšã®"}, {id:1950, en:"dumb", ja:"ã°ã‹"},
    {id:1951, en:"gloomy", ja:"æš—ã„"}, {id:1952, en:"queer", ja:"å¥‡å¦™ãª"}, {id:1953, en:"subtle", ja:"å¾®å¦™ãª"},
    {id:1954, en:"sinister", ja:"ä¸å‰ãª"}, {id:1955, en:"vile", ja:"ä¸‹å“ãª"}, {id:1956, en:"exhibit", ja:"å±•ç¤ºã™ã‚‹"},
    {id:1957, en:"reproduce", ja:"å†ç”Ÿã™ã‚‹"}, {id:1958, en:"multiply", ja:"å¢—ã‚„ã™"}, {id:1959, en:"reconcile", ja:"å’Œè§£ã•ã›ã‚‹"},
    {id:1960, en:"remedy", ja:"æ²»ç™‚"}, {id:1961, en:"medication", ja:"è–¬ç‰©æ²»ç™‚"}, {id:1962, en:"physician", ja:"å†…ç§‘åŒ»"},
    {id:1963, en:"hygiene", ja:"è¡›ç”Ÿ"}, {id:1964, en:"epidemic", ja:"ä¼æŸ“ç—…"}, {id:1965, en:"metabolism", ja:"ä»£è¬"},
    {id:1966, en:"organism", ja:"ç”Ÿç‰©"}, {id:1967, en:"evolution", ja:"é€²åŒ–"}, {id:1968, en:"ecology", ja:"ç”Ÿæ…‹"},
    {id:1969, en:"biodiversity", ja:"ç”Ÿç‰©å¤šæ§˜æ€§"}, {id:1970, en:"habitat", ja:"ç”Ÿæ¯åœ°"}, {id:1971, en:"conservation", ja:"ä¿è­·"},
    {id:1972, en:"globalization", ja:"ã‚°ãƒ­ãƒ¼ãƒãƒ«åŒ–"}, {id:1973, en:"infrastructure", ja:"åŸºç›¤"}, {id:1974, en:"innovation", ja:"é©æ–°"},
    {id:1975, en:"entrepreneur", ja:"èµ·æ¥­å®¶"}, {id:1976, en:"corporation", ja:"æ³•äºº"}, {id:1977, en:"venture", ja:"ãƒ™ãƒ³ãƒãƒ£ãƒ¼"},
    {id:1978, en:"subsidy", ja:"è£œåŠ©é‡‘"}, {id:1979, en:"debt", ja:"å€Ÿé‡‘"}, {id:1980, en:"inflation", ja:"ã‚¤ãƒ³ãƒ•ãƒ¬"},
    {id:1981, en:"recession", ja:"ä¸æ³"}, {id:1982, en:"democracy", ja:"æ°‘ä¸»ä¸»ç¾©"}, {id:1983, en:"republic", ja:"å…±å’Œå›½"},
    {id:1984, en:"monarchy", ja:"å›ä¸»åˆ¶"}, {id:1985, en:"parliament", ja:"å›½ä¼š"}, {id:1986, en:"election", ja:"é¸æŒ™"},
    {id:1987, en:"policy", ja:"æ”¿ç­–"}, {id:1988, en:"constitution", ja:"æ†²æ³•"}, {id:1989, en:"legislation", ja:"ç«‹æ³•"},
    {id:1990, en:"judicial", ja:"è£åˆ¤ã®"}, {id:1991, en:"jurisdiction", ja:"ç®¡è½„æ¨©"}, {id:1992, en:"treaty", ja:"æ¡ç´„"},
    {id:1993, en:"alliance", ja:"åŒç›Ÿ"}, {id:1994, en:"conflict", ja:"ç´›äº‰"}, {id:1995, en:"territory", ja:"é ˜åœŸ"},
    {id:1996, en:"defense", ja:"é˜²è¡›"}, {id:1997, en:"strategy", ja:"æˆ¦ç•¥"}, {id:1998, en:"diplomacy", ja:"å¤–äº¤"},
    {id:1999, en:"ambassador", ja:"å¤§ä½¿"}, {id:2000, en:"dimension", ja:"æ¬¡å…ƒ"}, {id:2001, en:"dull", ja:"é€€å±ˆã•ã›ã‚‹"},
    {id:2002, en:"ethnic", ja:"æ°‘æ—çš„ãª"}, {id:2003, en:"steady", ja:"ã—ã£ã‹ã‚Šã—ãŸ"}, {id:2004, en:"terminal", ja:"çµ‚ç‚¹"},
    {id:2005, en:"abuse", ja:"è™å¾…"}, {id:2006, en:"deliberately", ja:"ã‚ã–ã¨"}, {id:2007, en:"accustomed", ja:"æ…£ã‚ŒãŸ"},
    {id:2008, en:"organ", ja:"è‡“å™¨"}, {id:2009, en:"delicate", ja:"ç¹Šç´°ãª"}, {id:2010, en:"casual", ja:"å½¢å¼ã°ã‚‰ãªã„"},
    {id:2011, en:"strip", ja:"ç´°é•·ã„ä¸€ç‰‡"}, {id:2012, en:"constitution", ja:"æ†²æ³•"}, {id:2013, en:"barely", ja:"ã‹ã‚ã†ã˜ã¦"},
    {id:2014, en:"annual", ja:"å¹´ã«ï¼‘åº¦ã®"}, {id:2015, en:"fellow", ja:"ä»²é–“ã®"}, {id:2016, en:"core", ja:"ä¸­å¿ƒ"},
    {id:2017, en:"basis", ja:"åŸºç¤"}, {id:2018, en:"horizon", ja:"åœ°å¹³ç·š"}, {id:2019, en:"awful", ja:"ã²ã©ã„"},
    {id:2020, en:"passive", ja:"å—å‹•çš„ãª"}, {id:2021, en:"mature", ja:"æˆç†Ÿã—ãŸ"}, {id:2022, en:"faculty", ja:"å­¦éƒ¨"},
    {id:2023, en:"inclined", ja:"ï¼¶ã™ã‚‹å‚¾å‘ãŒã‚ã‚‹"}, {id:2024, en:"shade", ja:"é™°"}, {id:2025, en:"version", ja:"å‹"},
    {id:2026, en:"administration", ja:"çµŒå–¶"}, {id:2027, en:"protocol", ja:"è­°å®šæ›¸"}
];

// --- 2. çŠ¶æ…‹ç®¡ç† ---
const ADMIN_PASS = "Henly0402";
let state = {
    view: 'splash',
    currentUser: null,
    users: JSON.parse(localStorage.getItem('sys_users_final_v3')) || [],
    quiz: null
};

function save() { localStorage.setItem('sys_users_final_v3', JSON.stringify(state.users)); }

// --- 3. æç”»ã‚¨ãƒ³ã‚¸ãƒ³ ---
function render() {
    const root = document.getElementById('app');
    if (!root) return;

    if (state.view === 'splash') {
        root.innerHTML = `<div class="h-screen flex items-center justify-center bg-white text-center"><div><h1 class="text-3xl font-black text-blue-600 mb-2 tracking-tighter">SYSTEM Quiz</h1><p class="text-slate-300 italic">produced by Henly</p></div></div>`;
        setTimeout(() => { state.view = 'login'; render(); }, 2000);
    } 
    
    else if (state.view === 'login') {
        root.innerHTML = `
            <div class="min-h-screen flex flex-col items-center justify-center p-6 bg-slate-50">
                <div class="w-full max-w-sm bg-white p-10 rounded-[2.5rem] shadow-2xl relative">
                    <button onclick="adminAuth()" class="absolute top-8 left-8 text-[10px] font-black text-slate-200 tracking-widest uppercase">Admin</button>
                    <h2 class="text-2xl font-black text-center mb-10 tracking-tight text-slate-800 uppercase">Login</h2>
                    <input id="uID" type="text" placeholder="User ID" class="w-full p-4 bg-slate-50 rounded-2xl mb-4 outline-none border-2 border-transparent focus:border-blue-400 transition">
                    <input id="uPW" type="password" placeholder="Password" class="w-full p-4 bg-slate-50 rounded-2xl mb-8 outline-none border-2 border-transparent focus:border-blue-400 transition">
                    <button onclick="doLogin()" class="w-full py-5 bg-blue-600 text-white rounded-2xl font-black shadow-xl active:scale-95 transition">START</button>
                </div>
            </div>`;
    }

    else if (state.view === 'home') {
        const u = state.currentUser;
        const prog = Math.min(100, (u.progress / 2000) * 100);
        root.innerHTML = `
            <div class="min-h-screen max-w-md mx-auto p-8 flex flex-col">
                <div class="flex justify-between items-center mb-12">
                    <span class="text-[10px] font-black text-slate-400 tracking-widest uppercase">ID: ${u.id}</span>
                    <button onclick="state.view='login'; render()" class="text-[10px] font-bold text-red-400 uppercase">Exit</button>
                </div>
                <div class="flex-1 space-y-4">
                    <button onclick="startQuiz('Basic')" class="w-full py-8 bg-white rounded-[2rem] border-2 border-slate-100 font-bold text-xl text-slate-700 active:bg-slate-50 transition">Basic</button>
                    <button onclick="startQuiz('Standard')" class="w-full py-8 bg-white rounded-[2rem] border-2 border-slate-100 font-bold text-xl text-slate-700 active:bg-slate-50 transition">Standard</button>
                    <div class="pt-6">
                        <button onclick="startQuiz('Master')" class="w-full py-12 rounded-[2.5rem] text-2xl font-black transition-all ${u.progress >= 2000 ? 'master-gold' : 'bg-slate-900 text-white'}">
                            ${u.progress >= 2000 ? 'ğŸ‘‘ MASTER' : 'Master'}
                        </button>
                        <div class="mt-8 bg-slate-200 h-1.5 rounded-full overflow-hidden">
                            <div class="bg-blue-500 h-full transition-all duration-1000" style="width: ${prog}%"></div>
                        </div>
                        <div class="flex justify-between mt-4">
                            <span class="text-[10px] font-black text-slate-300 tracking-widest uppercase">${u.progress} / 2000 WORDS</span>
                        </div>
                    </div>
                </div>
            </div>`;
    }

    else if (state.view === 'test') {
        const q = state.quiz.questions[state.quiz.curr];
        const prog = ((state.quiz.curr + 1) / state.quiz.questions.length) * 100;
        root.innerHTML = `
            <div class="min-h-screen p-6 flex flex-col max-w-md mx-auto bg-white">
                <div class="w-full bg-slate-100 h-1 rounded-full mb-20">
                    <div class="bg-blue-500 h-full transition-all" style="width: ${prog}%"></div>
                </div>
                <div class="flex-1 flex flex-col items-center justify-center text-center">
                    <div class="text-[10px] font-black text-slate-200 mb-4 tracking-widest uppercase">No. ${q.id}</div>
                    <div class="text-5xl font-black text-slate-800 mb-16 tracking-tighter">${q.en}</div>
                </div>
                <div class="grid gap-3 mb-12">
                    ${q.choices.map((c, i) => `<button id="c-${i}" onclick="checkAns(${i})" class="w-full p-5 bg-slate-50 rounded-2xl font-bold text-left border-2 border-transparent active:border-blue-400 transition-all">${c}</button>`).join('')}
                </div>
            </div>`;
    }

    else if (state.view === 'result') {
        const q = state.quiz;
        const u = state.currentUser;
        if (q.level === 'Master' && u.progress < 2000) {
            u.progress = Math.max(0, u.progress + (q.score - (q.questions.length - q.score)));
            if(u.progress >= 2000) u.progress = 2000;
        }
        save();
        root.innerHTML = `
            <div class="min-h-screen flex flex-col items-center justify-center p-8 text-center bg-white">
                <div class="text-4xl font-black text-blue-600 mb-4 tracking-tighter uppercase">Result</div>
                <div class="text-xl font-bold text-slate-800 mb-12">${q.score} / ${q.questions.length} Correct</div>
                <button onclick="state.view='home'; render()" class="w-full max-w-xs py-5 bg-slate-900 text-white rounded-2xl font-black shadow-xl">CONTINUE</button>
            </div>`;
    }

    else if (state.view === 'admin') {
        root.innerHTML = `
            <div class="min-h-screen p-8 bg-slate-50 max-w-md mx-auto">
                <div class="flex justify-between items-center mb-10"><h2 class="font-black text-xl uppercase tracking-tighter">Admin Panel</h2><button onclick="state.view='login'; render()" class="text-xs font-bold text-slate-400">Exit</button></div>
                <div class="bg-white p-8 rounded-[2rem] shadow-sm mb-8">
                    <input id="nID" type="text" placeholder="New ID" class="w-full p-4 bg-slate-50 rounded-2xl mb-2 outline-none">
                    <input id="nPW" type="text" placeholder="Password" class="w-full p-4 bg-slate-50 rounded-2xl mb-6 outline-none">
                    <button onclick="regUser()" class="w-full py-4 bg-blue-600 text-white rounded-2xl font-black">Add User</button>
                </div>
                <div class="bg-white rounded-[2rem] shadow-sm overflow-hidden">
                    ${state.users.map(u => `<div class="p-6 border-t flex justify-between items-center"><div class="font-black text-slate-800">${u.id}</div><div class="text-[10px] text-slate-400">${u.progress}/2000</div></div>`).join('')}
                </div>
            </div>`;
    }
}

// --- 4. å®Ÿè¡Œãƒ­ã‚¸ãƒƒã‚¯ ---
function adminAuth() { if (prompt("Admin Password") === ADMIN_PASS) { state.view = 'admin'; render(); } }
function regUser() {
    const id = document.getElementById('nID').value, pw = document.getElementById('nPW').value;
    if(id && pw) { state.users.push({id, pass:pw, progress:0}); save(); render(); }
}
function doLogin() {
    const id = document.getElementById('uID').value, pw = document.getElementById('uPW').value;
    const u = state.users.find(x => x.id === id && x.pass === pw);
    if(u) { state.currentUser = u; state.view = 'home'; render(); } else { alert("Invalid Login"); }
}
function startQuiz(level) {
    let pool = [...wordData];
    let qs = [];
    const num = (level === 'Master') ? 100 : 20;
    for(let i=0; i<num; i++){
        const target = pool.splice(Math.floor(Math.random()*pool.length), 1)[0];
        let choices = [target.ja];
        while(choices.length < 4){
            const c = wordData[Math.floor(Math.random()*wordData.length)].ja;
            if(!choices.includes(c)) choices.push(c);
        }
        qs.push({...target, choices: choices.sort(() => Math.random()-0.5)});
    }
    state.quiz = { level, questions: qs, curr: 0, score: 0 };
    state.view = 'test';
    render();
}
function checkAns(idx) {
    const q = state.quiz.questions[state.quiz.curr];
    const ok = (idx !== -1 && q.choices[idx] === q.ja);
    document.getElementById(`c-${idx}`).classList.add(ok ? 'ans-correct' : 'ans-wrong');
    if(ok) state.quiz.score++;
    setTimeout(() => {
        if(state.quiz.curr < state.quiz.questions.length - 1) { state.quiz.curr++; render(); }
        else { state.view = 'result'; render(); }
    }, 450);
}

render();
</script>
</body>
</html>
